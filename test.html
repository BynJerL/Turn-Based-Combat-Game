<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        #bottom-menu {
            display: flex;
            flex-direction: column;
            width: 320px;
            background-color: yellow;
        }

        #info-bar {
            height: 80px;
            border: 3px solid black;
            padding: 5px;
            overflow: auto;
        }

        #next-button {
            display: none;
        }
    </style>
</head>
<body>
    <section id="bottom-menu">
        <div id="info-bar">
            <div id="log">Select any action below</div>
            <button id="next-button">Next</button>
        </div>
        <div id="action-bar">
            <button>Basic Attack</button>
            <button>Use Skill</button>
            <button>Use Item</button>
            <button>Check Info</button>
        </div>
    </section>

    <script>
        const logDiv = document.getElementById("log");
        const nextBtn = document.getElementById("next-button");
        const actionBar = document.getElementById("action-bar");
        const infoBar = document.getElementById("info-bar");

        const ItemEffect = Object.freeze({
            HEAL: "Heal",
            ATTACK_BOOST: "Attack Boost",
            DEFENSE_BOOST: "Defense Boost",
            SPEED_BOOST: "Speed Boost"
        });

        class Character {
            constructor (name, type, hp, sp, attack, defense, speed) {
                this.name = name;
                this.type = type;
                this.curr_hp = hp;
                this.max_hp = hp;
                this.curr_sp = sp;
                this.max_sp = sp;
                this.base_attack = attack;
                this.base_defense = defense;
                this.base_speed = speed;
                this.is_alive = true;
                this.effect = [];
            }
        }

        class Skill {
            constructor (name, type, cost, power) {
                this.name = name;
                this.type = type;
                this.cost = cost;
                this.power = power;
            }
        }

        class Item {
            constructor (name, effect, target, on_use_handler) {
                this.name = name;
                this.effect = effect;
                this.target = target;
                this.on_use_handler = on_use_handler;
            }

            use (user, target) {
                on_use_handler(user, target);
            }
        }

        const BattleManager = {
            acting_character: {
                name: "Alicia",
                curr_hp: 200,
                max_hp: 240,
                attack: 32,
                defense: 32,
                speed: 110,
                skills: [
                    "Plasma Ball",
                    "Light Arrow",
                    "Mana Enchant"
                ]
            },
            targets: [
                // This is just placeholder
                "Skeleton A",
                "Skeleton B",
                "Skeleton C"
            ],
            items: [
                // This is just placeholder
                "Healing Kit A",
                "Healing Kit A",
                "Attack Boost Kit A"
            ]
        }

        const UIManager = {
            init() {
                actionBar.children[0].onclick = () => this.showTargets("Basic Attack");;
                actionBar.children[1].onclick = () => this.showSkills();
                actionBar.children[2].onclick = () => this.showItems();
                actionBar.children[3].onclick = () => {
                    const acting_character = BattleManager.acting_character;
                    logDiv.innerHTML = `
                    ${acting_character.name}<br>
                    HP &emsp; ${acting_character.curr_hp}/${acting_character.max_hp}<br>
                    ATK &emsp; ${acting_character.attack}<br>
                    DEF &emsp; ${acting_character.defense}<br>
                    SPD &emsp; ${acting_character.speed}`;
                    this.clearInfoBarOptions();
                }
            },
            updateLog(content){
                logDiv.textContent = content;
            },
            clearInfoBarOptions() {
                Array.from(infoBar.querySelectorAll('.option-button')).forEach(button => button.remove());
            },
            showTargets(action) {
                this.clearInfoBarOptions();
                this.updateLog("Pick your target:");
                BattleManager.targets.forEach(target => {
                    const button = document.createElement('button');
                    button.textContent = target;
                    button.className = "option-button";
                    button.onclick = () => {
                        logDiv.textContent = `${BattleManager.acting_character.name} uses ${action} on ${target}!`;
                        this.clearInfoBarOptions();
                        Array.from(actionBar.children).forEach(button => {
                            button.disabled = true;
                        });
                        this.showNextButton();
                    }
                    infoBar.appendChild(button);
                });
            },
            showSkills() {
                this.clearInfoBarOptions();
                this.updateLog("Choose your skill:");
                BattleManager.acting_character.skills.forEach(skill => {
                    const button = document.createElement("button");
                    button.textContent = skill;
                    button.className = "option-button";
                    button.onclick = () => {this.showTargets(skill)};
                    infoBar.appendChild(button);
                });
            },
            showItems() {
                this.clearInfoBarOptions();
                this.updateLog("Choose your item:");
                BattleManager.items.forEach((item, idx) => {
                    const button = document.createElement("button");
                    button.textContent = item;
                    button.className = "option-button";
                    button.onclick = () => {
                        logDiv.textContent = `${BattleManager.acting_character.name} uses ${item}!`;
                        BattleManager.items.splice(idx, 1);
                        this.clearInfoBarOptions();
                        Array.from(actionBar.children).forEach(button => {
                            button.disabled = true;
                        });
                        this.showNextButton();
                    };
                    infoBar.appendChild(button);
                });
            },
            showNextButton() {
                logDiv.innerHTML = logDiv.innerHTML + "<br>Click \"Next\" to Continue"
                nextBtn.style.display = "block";
                nextBtn.onclick = () => {
                    this.updateLog("Select any action below");
                    Array.from(actionBar.children).forEach(button => {
                        button.disabled = false;
                    });
                    nextBtn.style.display = "none";
                };
            }
        }

        UIManager.init();
    </script>
</body>
</html>